---
- name: Determine the correct LUKS partition path
  set_fact:
    luks_partition: "{{ disk }}{{ 'p2' if 'nvme' in disk else '2' }}"

- name: Encrypt the partition using LUKS1 with password prompt
  expect:
    command: cryptsetup --type luks1 -v luksFormat "{{ luks_partition }}"
    responses:
      'Are you sure?': 'YES'
      'Enter passphrase': 'minel'
      'Verify passphrase': 'minel'

- name: Display encryption status
  debug:
    msg: "Encryption successful for {{ luks_partition }}"
